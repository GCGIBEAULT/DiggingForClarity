<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Digging For Clarity — Private Lab</title>
  <link rel="icon" href="footer_logo.png" type="image/png">
  <link rel="stylesheet" href="style.css">
  <style>
    :root {
      --bg: #f6f7f9;
      --card: #fff;
      --accent: #003366;
      --muted: #6b7280;
    }
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Georgia, serif;
      background: var(--bg);
      margin: 0;
      color: #0b1220;
    }
    .wrap {
      max-width: 960px;
      margin: 0 auto;
      padding: 20px;
    }
    .masthead {
      text-align: center;
      margin-top: 28px;
    }
    .masthead h1 {
      font-family: Georgia, serif;
      color: var(--accent);
      font-size: 2.4rem;
      margin: 0;
    }
    .masthead p {
      color: var(--muted);
      margin: 6px 0 18px;
    }
    .card {
      background: var(--card);
      padding: 14px;
      border-radius: 10px;
      box-shadow: 0 4px 14px rgba(7, 12, 20, 0.06);
    }
    .small {
      font-size: 0.95rem;
      color: var(--muted);
    }
    .btn {
      background: var(--accent);
      color: #fff;
      padding: 8px 12px;
      border: 0;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header class="masthead">
      <h1>Digging For Clarity</h1>
      <p class="small">Drama-free news, weather, and community updates with modular clarity.</p>
    </header>

    <div class="card" id="weatherCard" style="margin-top:24px;">
      <h2 style="margin:0 0 8px;color:var(--accent)">Weather Snapshot</h2>
      <ul style="list-style:none;padding:0;margin:0;">
        <li style="margin-bottom:6px;">Burlington: 62°F, partly cloudy</li>
        <li style="margin-bottom:6px;">Montpelier: 58°F, light rain</li>
        <li style="margin-bottom:6px;">Rutland: 60°F, foggy</li>
        <li style="margin-bottom:6px;">Stowe: 54°F, snow flurries</li>
      </ul>
      <p class="small" style="margin-top:8px;">Updated hourly • Source: NWS</p>
    </div>

    <div class="card" id="newsCard" style="margin-top:24px;">
      <h2 style="margin:0 0 8px;color:var(--accent)">News Highlights</h2>
      <ul style="list-style:none;padding:0;margin:0;">
        <li style="margin-bottom:6px;">DNA breakthrough solves 1992 cold case in Barre</li>
        <li style="margin-bottom:6px;">Congress debates military pay parity during shutdown</li>
        <li style="margin-bottom:6px;">Local builders rally to restore flood-damaged homes</li>
        <li style="margin-bottom:6px;">Vermont launches privacy-first broadband initiative</li>
      </ul>
      <p class="small" style="margin-top:8px;">Curated for clarity • No paywalls, no pop-ups</p>
    </div>

    <div class="card" id="rhythmCard" style="margin-top:24px;">
      <h2 style="margin:0 0 8px;color:var(--accent)">First and 15th Rhythm</h2>
      <ul style="list-style:none;padding:0;margin:0;">
        <li style="margin-bottom:6px;">Oct 1: Rent, insurance, utilities</li>
        <li style="margin-bottom:6px;">Oct 15: Groceries, gas, subscriptions</li>
        <li style="margin-bottom:6px;">Export snapshot before each cycle</li>
        <li style="margin-bottom:6px;">Import previous cycle to audit drift</li>
      </ul>
      <p class="small" style="margin-top:8px;">Mapped to real pay periods • Editorially contained</p>
    </div>

    <div class="card" id="primaryCard" style="margin-top:24px;">
      <h2 style="margin:0 0 8px;color:var(--accent)">IOIOIO Budget Starter</h2>
      <div id="budgetRoot"></div>
    </div>
  </div>

  <script>
    const state = {
      income: 0,
      lines: []
    };

    function saveState() {
      localStorage.setItem('dfc:budget', JSON.stringify(state));
    }

    function loadState() {
      const saved = localStorage.getItem('dfc:budget');
      if (saved) Object.assign(state, JSON.parse(saved));
    }

    function render() {
      const root = document.getElementById('budgetRoot');
      root.innerHTML = '';

      const incomeBlock = document.createElement('div');
      incomeBlock.innerHTML = `
        <label for="income"><strong>Income:</strong></label>
        <input type="number" id="income" value="${state.income}" style="width:100%;padding:8px;border-radius:6px;border:1px solid #ccc;" />
      `;
      root.appendChild(incomeBlock);

      const linesBox = document.createElement('div');
      linesBox.id = 'billBox';
      linesBox.style = 'margin-top:12px;display:flex;flex-direction:column;gap:8px;';
      root.appendChild(linesBox);

      state.lines.forEach(line => {
        const el = document.createElement('div');
        el.className = 'billLine';
        el.style = 'display:flex;gap:8px;align-items:center;';
        el.innerHTML = `
          <input type="text" class="name" value="${line.name}" style="width:30%;" />
          <input type="number" class="amt" value="${line.amount}" style="width:20%;" />
          <button class="urlBtn">➕</button>
          <button class="rem">✕</button>
        `;
        linesBox.appendChild(el);

        el.querySelector('.name').addEventListener('change', e => {
          line.name = e.target.value;
          saveState();
        });

        el.querySelector('.amt').addEventListener('change', e => {
          line.amount = Number(e.target.value) || 0;
          saveState();
          renderTotals();
        });

        el.querySelector('.urlBtn').addEventListener('click', () => {
          const v = prompt('Enter or edit vendor URL:', line.vendor_url || '');
          if (v !== null) {
            line.vendor_url = v.trim();
            saveState();
          }
        });

        el.querySelector('.rem').addEventListener('click', () => {
          if (confirm('Remove this line?')) {
            state.lines = state.lines.filter(l => l !== line);
            saveState();
            render();
          }
        });
      });

      const controls = document.createElement('div');
      controls.innerHTML = `
        <button onclick="addLine()">+ Add line</button>
        <button onclick="exportSnapshot()">Export</button>
      `;
      root.appendChild(controls);

      const totals = document.createElement('p');
      totals.id = 'totalsBlock';
      totals.innerHTML = `
        Leftover: <span id="leftoverVal">$0</span> • <span id="perDayVal">$0/day</span>
      `;
      root.appendChild(totals);

      document.getElementById('income').addEventListener('input', e => {
        state.income = Number(e.target.value) || 0;
        saveState();
        renderTotals();
      });

      renderTotals();
    }

    function renderTotals() {
      const income = Number(state.income) || 0;
      const expenses = state.lines.reduce((sum, l) => sum + (Number(l.amount) || 0), 0);
      const leftover = income - expenses;
      document.getElementById('leftoverVal').textContent = '$' + Math.round(leftover);
      document.getElementById('perDayVal').textContent = '$' + Math.round(leftover / 15) + '/day';
    }

    function addLine() {
      state.lines.push({ name: 'New item', amount: 0, vendor_url: '' });
      saveState();
      render();
    }

    function exportSnapshot() {
      const snap = {
        income: state.income,
        lines: state.lines,
        created: new Date().toISOString()
      };
      const blob = new Blob([JSON.stringify(snap, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `budget_snapshot.json`;
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    }

    document.addEventListener('DOMContentLoaded', () => {
      loadState();
      render();
    });
  </script>
</body>
</html>

  </script>
</body>
</html>

